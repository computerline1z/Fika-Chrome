"use strict";var App={module:{extend:function(e,t){t.prototype=App,this[e]=new t},call:function(e,t,n){if(!this.hasOwnProperty(e))return App.log("Error: "+e+" not existed"),!1;if(!this[e].hasOwnProperty(t))return App.log("Error: "+t+" not existed in "+e),!1;try{this[e][t](n)}catch(e){App.log(e)}},run:function(){for(var e in this)this.hasOwnProperty(e)&&this[e].hasOwnProperty("init")&&(this[e].init(),App.log("[Module] "+e+" init."))}},event:{extend:function(e,t){t.prototype=App,this[e]=new t},init:function(){for(var e in this)this[e].hasOwnProperty("event")&&(this.listen(this[e]),App.log("[Event] "+e+" is listening."))},listen:function(e){for(var t in e.event)e.event[t]()},addListener:function(e){}},view:{display:function(e,t,n,i){this.eval_view_func(e,t),(i?$(i):$("body")).html(this[e+"."+t].init(n))},append:function(e,t,n,i){this.eval_view_func(e,t),(i?$(i):$("body")).append(this[e+"."+t].init(n))},get_view:function(e,t,n){return this.eval_view_func(e,t),this[e+"."+t].init(n)},extend:function(e,t){t.prototype=App,this[e]=new t},eval_view_func:function eval_view_func(model,name){var key=model+"."+name;if(!this.hasOwnProperty(key)){var content=this[model][name](),_html=[],txt=["App.view.extend('"+model+"."+name+"', function() {"];for(var i in txt.push("this.init = function(data) {"),txt.push("var html = '';"),content=content.split("\n"),content)_html.push(this.parse(content[i]));txt.push(_html.join("")),txt.push("return html;"),txt.push("}"),txt.push("});"),eval(txt.join(""))}},parse:function(e){if(!e||""===e)return null;var n=e.trim().replace(new RegExp(/'/g),"\\'"),i=!1;return function(){for(var e=void 0,t=/\{\{ for (.+?) \}\}/i;e=t.exec(n);)i=!0,n=n.replace(e[0],"for("+e[1].replace(new RegExp(/\\/g),"")+"){")}(),function(){for(var e=void 0,t=/\{\{ if (.+?) \}\}/i;e=t.exec(n);)i=!0,n=n.replace(e[0],"if("+e[1].replace(new RegExp(/\\/g),"")+"){");for(t=/\{\{ else if (.+?) \}\}/i;e=t.exec(n);)i=!0,n=n.replace(e[0],"} else if("+e[1].replace(new RegExp(/\\/g),"")+"){");for(t=/\{\{ else \}\}/i;e=t.exec(n);)i=!0,n=n.replace(e[0],"} else {")}(),function(){for(var e=void 0,t=/\{\{ end \}\}/i;e=t.exec(n);)i=!0,n=n.replace(e[0],"}")}(),function(){for(var e=void 0,t=/\{\{ var (.+?) \}\}/i;e=t.exec(n);)i=!0,n=n.replace(e[0],"var "+e[1].replace(new RegExp(/\\/g),"")+";")}(),function(){for(var e=void 0,t=/\{\{ (.+?) \}\}/i;e=t.exec(n);)n=n.replace(e[0],"'+"+e[1].replace(new RegExp(/\\/g),"")+"+'")}(),i||(n="html += '"+n+"';"),n}},log:function(e){console.log("[Fika]",e)},run:function(){this.module.run(),this.event.init()}};